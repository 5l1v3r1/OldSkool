<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="Author" CONTENT="frenzy">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.05 [en] (Win95; I) [Netscape]">
   <TITLE>frenzy's codebase - catmul rom splines</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#000066" LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000">

<CENTER>
<HR WIDTH="100%"><B><I><FONT COLOR="#FFCC00"><FONT SIZE=+4>Splines for
Interpolation through Data Points</FONT></FONT></I></B></CENTER>

<HR WIDTH="100%">

<P><B><I><FONT COLOR="#FFCC00"><FONT SIZE=+2>Introduction:</FONT></FONT></I></B>
<BR><I><FONT COLOR="#FFFF99">Continuing our theme of splines I recently
required a function that would interpolate through a set of data points.&nbsp;
In the other spline document we looked at hermite curves which would interpolate
through control points and use two tangent vectors for controlling the
shape of the curve.&nbsp; The problem is generating the tangent vectors.&nbsp;
Its not easy to imagine the shape of curve that will be produced.&nbsp;
So, imagine you have a set of points in space and you wish to draw a curve
that passes through all these points.&nbsp; You don't really want to generate
tangent vectors yourself so lets look at a method of doing it.</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><B><I><FONT COLOR="#FFCC00"><FONT SIZE=+2>Catmull-Rom splines:</FONT></FONT></I></B>
<BR><I><FONT COLOR="#FFFF99">The Catmull-Rom spline is very usefull for
this.&nbsp; Its very similar to hermite curves except the tangent vector
at each point is given by this formula:</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">Ri = 0.5 * (P(i+1) - P(i-1))</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">That says the tangent vector for point i is
generated by the next and previous point.&nbsp; Now we can create a function
that given two points to interpolate between and the previous and next
points to these gives us an interpolated value.&nbsp; We can incorperate
the calculation of the tangent vectors within the basis matrix quite easily
also.&nbsp; Lets do it!</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">Our geometry vector for hermite curves is:</FONT></I>
<BR><I><FONT COLOR="#FFFF99">&nbsp;</FONT></I>
<BR><I><FONT COLOR="#FFFF99">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
P1</FONT></I>
<BR><I><FONT COLOR="#FFFF99">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
P4</FONT></I>
<BR><I><FONT COLOR="#FFFF99">Gh = R1</FONT></I>
<BR><I><FONT COLOR="#FFFF99">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
R4</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">Our new geometry vector is:</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Pi-3</FONT></I>
<BR><I><FONT COLOR="#FFFF99">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Pi-2</FONT></I>
<BR><I><FONT COLOR="#FFFF99">Gcm&nbsp; = Pi-1</FONT></I>
<BR><I><FONT COLOR="#FFFF99">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Pi</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">When we are at t=0, we are at P(i-2) and at
t=1 we are at P(i-1).&nbsp; This gives us a relationship between the geometry
vector for hermite curves and the geometry vector for catmull-rom curves:</FONT></I>
<BR><I><FONT COLOR="#FFFF99"></FONT></I>&nbsp;
<BR><I><FONT COLOR="#FFFF99"></FONT></I>&nbsp;<I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">P1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;
1&nbsp; 0&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
P(i-3)</FONT></I>
<BR><I><FONT COLOR="#FFFF99">P4&nbsp; =&nbsp; 0&nbsp; 0&nbsp; 1&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
.&nbsp; P(i-2)</FONT></I>
<BR><I><FONT COLOR="#FFFF99">R1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -0.5 0&nbsp;
0.5&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; P(i-1)</FONT></I>
<BR><I><FONT COLOR="#FFFF99">R4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; -0.5&nbsp;
0&nbsp; 0.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Pi</FONT></I>
<BR><I><FONT COLOR="#FFFF99"></FONT></I>&nbsp;
<BR><I><FONT COLOR="#FFFF99"></FONT></I>&nbsp;
<BR><I><FONT COLOR="#FFFF99"></FONT></I>&nbsp;<I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">Remembering the formula for hermite curves
is:</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">Q(t) = T . Mh . Gh</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">Then now we have:</FONT></I><I><FONT COLOR="#FFFF99"></FONT></I>

<P><I><FONT COLOR="#FFFF99">Q(t) = T . Mh .</FONT></I>
</BODY>
</HTML>
